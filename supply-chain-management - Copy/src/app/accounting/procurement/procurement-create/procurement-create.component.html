
<div class="container">
  <div class="card mt-4">
    <div class="card-header">
      <h4>Create Procurement</h4>
    </div>
    <div class="card-body">
      <div class="form-group mb-3">
        <label for="supplier">Supplier</label>
        <select id="supplier" class="form-control" [(ngModel)]="procurement.rawMaterialSupplier">
          <option *ngFor="let supplier of suppliers" [ngValue]="supplier">{{ supplier.companyName }}</option>
        </select>
      </div>
      <div class="form-group mb-3">
        <label for="procurementdate">Procurement Date</label>
        <input type="date" id="procurementdate" class="form-control" [(ngModel)]="procurement.salesdate">
      </div>
      <div class="form-group mb-3">
        <label for="totalprice">Total Price</label>
        <input type="number" id="totalprice" class="form-control" [(ngModel)]="procurement.totalprice" readonly>
      </div>
      <button type="button" class="btn btn-primary" (click)="addRawMaterial()">Add Raw Material</button>
      <table class="table table-bordered">
        <thead>
        <tr>
          <th>#</th>
          <th>Raw Material Name</th>
          <th>Quantity</th>
          <th>Unit Price</th>
          <th>Actions</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let rawMaterial of procurement.rawMaterial; let i = index">
          <td>{{ i + 1 }}</td>
          <td>
            <select [(ngModel)]="rawMaterial.id" (ngModelChange)="setRawMaterialDetails(rawMaterial.id)">
              <option *ngFor="let rm of rawMaterials" [ngValue]="rm.id">{{ rm.name }}</option>
            </select>
          </td>
          <td>
            <input type="number" [(ngModel)]="rawMaterial.quantity" placeholder="Quantity" (ngModelChange)="calculateTotalPrice()">
          </td>
          <td>
            <input type="number" [(ngModel)]="rawMaterial.price" placeholder="Unit Price" [disabled]="true">
          </td>
          <td>
            <button type="button" class="btn btn-danger btn-sm" (click)="removeRawMaterial(i)">Remove</button>
          </td>
        </tr>
        </tbody>
      </table>
      <button type="button" class="btn btn-primary" (click)="saveProcurement()">Save Procurement</button>
    </div>
  </div>
</div>

