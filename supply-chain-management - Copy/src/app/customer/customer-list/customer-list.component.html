

<div class="container">
  <h2>Customer List</h2>
  <table class="table table-bordered">
    <thead>
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Email</th>
        <th>Phone</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let customer of customers">
        <td>{{ customer.id }}</td>
        <td>{{ customer.name }}</td>
        <td>{{ customer.email }}</td>
        <td>{{ customer.phone }}</td>
        <td>
          <!-- Only non-admin users can see the edit button -->
          <button *ngIf="!isAdmin" class="btn btn-warning" (click)="selectCustomer(customer)">Edit</button>
          
          <!-- Only non-admin users can see the delete button -->
          <button *ngIf="!isAdmin" class="btn btn-danger" (click)="deleteCustomer(customer)">Delete</button>
          
          <!-- Both admin and non-admin users can see the view button -->
          <button class="btn btn-info" (click)="viewCustomer(customer)">View</button>
        </td>
      </tr>
    </tbody>
  </table>

  <!-- Form for editing/adding customer details -->
  <div *ngIf="isEditing">
    <h3 *ngIf="selectedCustomer?.id">Edit Customer</h3>
    <h3 *ngIf="!selectedCustomer?.id">Add Customer</h3>
    <form (ngSubmit)="saveCustomer(selectedCustomer!)">
      <div class="form-group">
        <label for="name">Name:</label>
        <input id="name" [(ngModel)]="selectedCustomer!.name" name="name" class="form-control" required>
      </div>
      <div class="form-group">
        <label for="email">Email:</label>
        <input id="email" type="email" [(ngModel)]="selectedCustomer!.email" name="email" class="form-control" required>
      </div>
      <div class="form-group">
        <label for="phone">Phone:</label>
        <input id="phone" [(ngModel)]="selectedCustomer!.phone" name="phone" class="form-control">
      </div>
      <button type="submit" class="btn btn-success">Save</button>
      <button type="button" class="btn btn-secondary" (click)="cancel()">Cancel</button>
    </form>
  </div>

  <!-- View customer details -->
  <div *ngIf="!isEditing && selectedCustomer">
    <h3>Customer Details</h3>
    <p><strong>Name:</strong> {{ selectedCustomer.name }}</p>
    <p><strong>Email:</strong> {{ selectedCustomer.email }}</p>
    <p><strong>Phone:</strong> {{ selectedCustomer.phone }}</p>
    <button class="btn btn-secondary" (click)="cancel()">Close</button>
  </div>
</div>
